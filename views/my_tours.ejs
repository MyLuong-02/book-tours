<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('_header') %>
  <title><%= title %></title>
</head>

<body>
  <%- include('_navbar') %>
  <main class="main">
    <div class="card-container">
      <% tours.forEach((tour) => { %>
      <div class="card">
        <div class="card__header">
          <div class="card__picture">
            <div class="card__picture-overlay">&nbsp;</div>
            <img src="img/tours/<%= tour.imageCover %>" alt="<%= tour.name %>" class="card__picture-img" />
          </div>

          <h3 class="heading-tertirary">
            <span><%= tour.name %></span>
          </h3>
        </div>

        <div class="card__details">
          <h4 class="card__sub-heading"><%= tour.difficulty %> <%= tour.duration %>-day tour`</h4>
          <p class="card__text">
            <%= tour.summary %>
          </p>
          <div class="card__data">
            <svg class="card__icon" aria-label="Map Pin">
              <use xlink:href="img/icons.svg#icon-map-pin"></use>
            </svg>
            <span><%= tour.startLocation.description %></span>
          </div>
          <div class="card__data">
            <svg class="card__icon" aria-label="Calendar icon">
              <use xlink:href="img/icons.svg#icon-calendar"></use>
            </svg>
            <span><%= tour.startDates[0].toLocaleString('en-us', {month: 'long', year: 'numeric'}) %></span>
          </div>
          <div class="card__data">
            <svg class="card__icon" aria-label="Flag icon">
              <use xlink:href="img/icons.svg#icon-flag"></use>
            </svg>
            <span><%= tour.locations.length %> stops</span>
          </div>
          <div class="card__data">
            <svg class="card__icon" aria-label="People">
              <use xlink:href="img/icons.svg#icon-user"></use>
            </svg>
            <span><%= tour.maxGroupSize %> people</span>
          </div>
        </div>

        <div class="card__footer">
          <p>
            <span class="card__footer-value">$<%= tour.price %></span>
            <span class="card__footer-text">per person</span>
          </p>
          <p class="card__ratings">
            <span class="card__footer-value"><%= tour.ratingsAverage %></span>
            <span class="card__footer-text">rating (<%= tour.ratingsQuantity %> reviews)</span>
          </p>
          <a href="/review/<%= tour.slug %>" class="btn btn--green btn--small>">Review</a>
        </div>
      </div>
      <% }); %>
    </div>
  </main>

  <nav class="mobile-nav-wrapper">
    <div class="mobile-nav">
      <% if (user.role == "admin") { %>
      <a href="/me"><svg>
          <use xlink:href="img/icons.svg#icon-settings"></use>
        </svg>Settings</a>
      <a href="/manage-tours"><svg>
          <use xlink:href="img/icons.svg#icon-map"></use>
        </svg>Tours</a>
      <a href="/manage-users"><svg>
          <use xlink:href="img/icons.svg#icon-users"></use>
        </svg>Users</a>
      <a href="/manage-bookings"><svg>
          <use xlink:href="img/icons.svg#icon-briefcase"></use>
        </svg>Bookings</a>
      <a href="/manage-reviews"><svg>
          <use xlink:href="img/icons.svg#icon-star"></use>
        </svg>Reviews</a>
      <% } else { %>
      <a href="/me"><svg>
          <use xlink:href="img/icons.svg#icon-settings"></use>
        </svg>Settings</a>
      <a href="/my-tours" aria-current="page"><svg>
          <use xlink:href="img/icons.svg#icon-briefcase"></use>
        </svg>Bookings</a>
      <a href="/my-reviews"><svg>
          <use xlink:href="img/icons.svg#icon-star"></use>
        </svg>Reviews</a>
      <a href="/billing"><svg>
          <use xlink:href="img/icons.svg#icon-credit-card"></use>
        </svg>Billing</a>
      <% } %>
    </div>
  </nav>
  <%- include('_footer') %>

  <script type="module" src="js/bundle.js"></script>